webpackJsonp([1],{"+9mB":function(t,a){},"/8vw":function(t,a){},"0UH4":function(t,a){},"1XiC":function(t,a){},"35Lu":function(t,a){},"8sJK":function(t,a){},EhxA:function(t,a){},GhjM:function(t,a){},Kbv7:function(t,a){},Kg7K:function(t,a){},MzKY:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("y2iJ");var s=e("fkOI"),i=(e("33iB"),e("LhXK")),o=(e("B9qP"),e("UtRs")),n=(e("+6AY"),e("CTpo")),r=(e("xP6f"),e("cOys")),c=(e("TTIX"),e("GaFr")),l=(e("hjJ/"),e("WwM2")),u=(e("Rr3N"),e("M/8l")),v=(e("E9il"),e("Or6s")),h=e("xd7I"),m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mf-tab-wrap",class:{blur:t.blur},on:{dblclick:t.backTop}},[e("div",{staticClass:"container mf-tab"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/home"}},[t._v("首页")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/find"}},[t._v("发现")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/ranking"}},[t._v("排行")])],1),t._v(" "),e("div",{staticClass:"tab-item mf-search",on:{click:t.toSearch}},[e("span")])])])},staticRenderFns:[]};var d=e("C7Lr")({data:function(){return{blur:!1}},methods:{backTop:function(){},toSearch:function(){this.$router.push("/search")}},mounted:function(){},created:function(){},computed:{listenMask:function(){return this.$store.state.maskStatus}},watch:{listenMask:function(t){this.blur=t}}},m,!1,function(t){e("brgl")},"data-v-17ecf6a4",null).exports,f={name:"sortCard",props:{type:String,name:String,icon:String},data:function(){return{}},methods:{func:function(){this.$emit("func")}}},p={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"sort",class:[this.type,this.icon],on:{click:this.func}},[a("span",[this._v(this._s(this.name))])])},staticRenderFns:[]};var _=e("C7Lr")(f,p,!1,function(t){e("oB5S")},"data-v-7dc27d1e",null).exports,g={name:"App",data:function(){return{LocationCity:"正在定位"}},mounted:function(){},created:function(){},methods:{city:function(){var t=this;(new BMap.Geolocation).getCurrentPosition(function(a){var e=a.address.city;a.address.province;t.LocationCity=e},function(a){t.LocationCity="定位失败"},{provider:"baidu"})}},components:{Headers:d,SortCard:_}},w={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[t.$route.meta.navShow?e("Headers"):t._e(),t._v(" "),e("keep-alive",[t.$route.meta.keepAlive?e("router-view"):t._e()],1),t._v(" "),e("transition",{attrs:{name:"fadeIn",mode:"in-out"}},[t.$route.meta.keepAlive?t._e():e("router-view")],1)],1)},staticRenderFns:[]};var C=e("C7Lr")(g,w,!1,function(t){e("+9mB")},null,null).exports,S=e("aozt"),y=e.n(S),k=e("3XdE"),V={name:"Home",data:function(){return{blurStatus:!1,hotMovieList:{arr:[],totalValue:1},showingMovieList:{arr:[],totalValue:1},movieList_l:[],movieList_r:[],hotStartValue:0,showingStartValue:0,countValue:10,totalValue:1,sortCardType:"hot",switchData:!0,loading:!0}},computed:{listenSortCard:function(){return this.$store.state.homeSortCard.type}},watch:{listenSortCard:function(t){console.log(this.sortCardType),console.log(t),t!=this.sortCardType&&(this.sortCardType=t,this.movieList_l=[],this.movieList_r=[],10!=this.countValue&&(this.countValue=10),this.startGet())}},created:function(){this.startGet()},mounted:function(){var t=this;this.switchData=!1,window.addEventListener("scroll",function(){document.body.offsetHeight-window.scrollY-window.innerHeight<=200&&t.switchData&&(t.switchData=!1,t.startGet(),console.log("到底了"))})},methods:{startGet:function(){"hot"==this.sortCardType?this.getMock(this.hotMovieList,"hotStartValue"):"showing-soon"==this.sortCardType&&this.getMock(this.showingMovieList,"showingStartValue")},getMock:function(t,a){var e=this;if(t.arr.length<t.totalValue){console.log("没有数据，开始获取"),console.log(this.$store.state.homeURL+this[a]+"&count="+this.countValue);this.$ajax.get("https://bird.ioliu.cn/v1/?url="+this.$store.state.homeURL+this[a]+"&count="+this.countValue).then(function(s){if(t.totalValue=s.data.total,e[a]>=t.totalValue)return e.switchData=!1,e.countValue=10,!1;for(var i=0;i<e.countValue;i++)t.arr.push(s.data.subjects[i]);e[a]+=e.countValue,e[a]+e.countValue>=s.data.total&&(e.countValue=s.data.total-e[a]),e.startDistMovie(t.arr),e.switchData=!0}).catch(function(t){e.$toast("获取数据失败，请稍候再试。")})}else console.log("有数据，进行分配"),this.startDistMovie(t.arr),this.switchData=!0},startDistMovie:function(t){this.$store.commit("distMovie",{listArr:t,leftList:this.movieList_l,rightList:this.movieList_r})},showMask:function(){this.$store.commit("showMask"),this.blurStatus=!this.blurStatus},switchCard:function(t){var a={type:this.$refs[t]._props.type,name:this.$refs[t]._props.name};this.$store.commit("switchCard",a),this.$store.commit("switchURL",a),this.showMask()}},components:{SortCard:_}},$={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"content",class:{blur:t.blurStatus}},[e("van-row",{ref:"movieBox",attrs:{type:"flex",justify:"space-between"}},[e("van-col",{staticClass:"content",attrs:{span:"11"}},[e("div",{ref:"leftSection",staticClass:"leftSection"},[e("SortCard",{attrs:{type:t.$store.state.homeSortCard.type,icon:"badge",name:t.$store.state.homeSortCard.name},on:{func:function(a){return t.showMask()}}}),t._v(" "),e("transition-group",{attrs:{name:"fadeInUp"}},t._l(t.movieList_l,function(a){return e("div",{key:a.id},[e("router-link",{attrs:{to:"/movieInfo/"+a.id}},[e("div",{staticClass:"movie-card"},[e("div",{staticClass:"movie-cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.images.small,expression:"item.images.small"}],attrs:{src:a.images.small,alt:""}})]),t._v(" "),e("h6",{staticClass:"title"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t._f("fullScore")(a.rating.average))+"\n                  ")])])])],1)}),0)],1)]),t._v(" "),e("van-col",{staticClass:"content",attrs:{span:"11"}},[e("div",{ref:"rightSection",staticClass:"rightSection"},[e("transition-group",{attrs:{name:"fadeInUp"}},t._l(t.movieList_r,function(a){return e("div",{key:a.id},[e("router-link",{attrs:{to:"/movieInfo/"+a.id}},[e("div",{staticClass:"movie-card"},[e("div",{staticClass:"movie-cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.images.small,expression:"item.images.small"}],attrs:{src:a.images.small,alt:""}})]),t._v(" "),e("h6",{staticClass:"title"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t._f("fullScore")(a.rating.average)))])])])],1)}),0)],1)])],1),t._v(" "),e("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),e("footer",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[e("span",[t._v("已经到底了哟")])])],1),t._v(" "),e("van-popup",{staticClass:"show-pops",on:{"click-overlay":t.showMask},model:{value:t.blurStatus,callback:function(a){t.blurStatus=a},expression:"blurStatus"}},[e("h6",{staticClass:"sort-title"},[t._v("切换分类：")]),t._v(" "),e("SortCard",{ref:"hotCard",attrs:{type:"hot",name:"正在热映"},on:{func:function(a){return t.switchCard("hotCard")}}}),t._v(" "),e("SortCard",{ref:"showingCard",attrs:{type:"showing-soon",name:"即将上映"},on:{func:function(a){return t.switchCard("showingCard")}}})],1)],1)},staticRenderFns:[]};var b=e("C7Lr")(V,$,!1,function(t){e("GhjM")},"data-v-101cf3f7",null).exports,L={name:"MovieSort",props:{type:String,name:String},data:function(){return{}},methods:{func:function(){this.$emit("func")}}},x={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"sort",class:[this.type],on:{click:this.func}},[a("span",[this._v(this._s(this.name))])])},staticRenderFns:[]};var I={name:"Find",data:function(){return{sortList:[{type:"love",name:"爱情"},{type:"comedy",name:"喜剧"},{type:"sci-fi",name:"科幻"},{type:"anime",name:"动画"},{type:"crime",name:"犯罪"},{type:"documentary",name:"纪录片"},{type:"suspense",name:"悬疑"},{type:"song-and-dance",name:"歌舞"},{type:"homosexual",name:"同性"},{type:"fantasy",name:"奇幻"},{type:"action-adventure",name:"动作"}]}},methods:{getSortName:function(t){var a=t.toElement.innerText;this.$router.push({name:"Search",params:{name:a}})}},components:{MovieSort:e("C7Lr")(L,x,!1,function(t){e("Pi1E")},"data-v-6e4ea42f",null).exports}},M={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"find-content"},[e("div",{staticClass:"find-sort"},[e("h6",{staticClass:"find-label"},[t._v("类型：")]),t._v(" "),e("div",{staticClass:"find-sort-wrap"},t._l(t.sortList,function(a,s){return e("div",{key:s,staticClass:"find-sort-item",on:{click:function(a){return t.getSortName(a)}}},[e("MovieSort",{attrs:{type:a.type,name:a.name}})],1)}),0)])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("footer",[a("span",[this._v("已经到底了哟")])])}]};var D=e("C7Lr")(I,M,!1,function(t){e("35Lu")},"data-v-6056c6d5",null).exports,T={name:"MovieInfo",data:function(){return{movieID:this.$route.params.id,movieTitle:"",movieInfo:{},movieCover:"",moreInfo:!1,moreText:"更多信息",value:0,closeBtn:!1}},created:function(){this.getMovieInfo()},mounted:function(){var t=this;window.addEventListener("scroll",function(){window.scrollY>100?t.closeBtn=!0:t.closeBtn=!1},!0)},methods:{getMovieInfo:function(){var t=this;this.$ajax.get("https://bird.ioliu.cn/v1/?url=https://api.douban.com/v2/movie/subject/"+this.movieID).then(function(a){t.movieInfo={},t.movieTitle=a.data.title,t.value=a.data.rating.average/2,t.movieCover=a.data.images.large.replace(/s_ratio_poster/g,"l_ratio_poster"),t.movieInfo=a.data}).catch(function(a){t.$toast("获取数据失败，请稍候再试。")})},getInfoMock:function(){var t=this;this.$ajax.get("/info").then(function(a){console.log(a.data),t.movieTitle=a.data.data.title,t.value=a.data.data.rating.average/2,t.movieCover=a.data.data.images.large.replace(/s_ratio_poster/g,"l_ratio_poster"),t.casts=a.data.data.casts,t.movieInfo=a.data.data}).catch(function(a){t.$toast("获取数据失败，请稍候再试。")})},more:function(){this.moreInfo=!this.moreInfo,this.moreInfo?this.moreText="收起":this.moreText="更多信息"},back:function(){this.$router.go(-1)}},filters:{}},N={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"movie-page"},[e("div",{staticClass:"movie-page-cover"},[e("img",{attrs:{src:t.movieCover,alt:""}}),t._v(" "),e("div",{staticClass:"mask"})]),t._v(" "),e("div",{staticClass:"movie-page-info container"},[e("h2",{staticClass:"movie-name",class:{maxName:t.movieTitle.length>6}},[t._v(t._s(t.movieTitle))]),t._v(" "),e("h6",{staticClass:"director"},[t._v("\n      "+t._s(t.movieInfo.year)+" - "+t._s(t.movieInfo.original_title)+"\n    ")]),t._v(" "),e("div",{staticClass:"movie-star"},[e("van-rate",{attrs:{"allow-half":"","void-icon":"star","void-color":"#eee",readonly:""},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}}),t._v(" "),e("span",[t._v(t._s(2*t.value))])],1),t._v(" "),e("div",{staticClass:"genres"},t._l(t.movieInfo.genres,function(a,s){return e("span",{key:s},[t._v(t._s(a))])}),0),t._v(" "),e("transition",{attrs:{name:"bounce"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.moreInfo,expression:"moreInfo"}],staticClass:"other-info"},[e("p",{staticClass:"aka"},[t._v("又名："),t._l(t.movieInfo.aka,function(a,s){return e("span",{key:s},[t._v(t._s(a))])})],2),t._v(" "),e("p",{staticClass:"country"},[t._v("制片国家/地区："),t._l(t.movieInfo.countries,function(a,s){return e("span",{key:s},[t._v(t._s(a))])})],2)])]),t._v(" "),e("div",{staticClass:"more",on:{click:t.more}},[e("span",{class:{open:!t.moreInfo,close:t.moreInfo}},[t._v(t._s(t.moreText))])]),t._v(" "),e("h6",{staticClass:"intro"},[t._v(t._s(t.movieInfo.summary))])],1),t._v(" "),e("div",{staticClass:"figure-wrap dir container"},[e("h6",[t._v("导演：")]),t._v(" "),e("div",{staticClass:"scroll-wrap"},t._l(t.movieInfo.directors,function(a,s){return e("figure",{key:s},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.avatars.small,expression:"dir.avatars.small"}],attrs:{src:a.avatars.small,alt:a.name}}),t._v(" "),e("p",[t._v(t._s(a.name))])])}),0)]),t._v(" "),t.movieInfo.casts?e("div",{staticClass:"figure-wrap dir container"},[e("h6",[t._v("演职员：")]),t._v(" "),e("div",{staticClass:"scroll-wrap"},t._l(t.movieInfo.casts,function(a,s){return e("figure",{key:s},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.avatars.small,expression:"casts.avatars.small"}],attrs:{src:a.avatars.small,alt:a.name}}),t._v(" "),e("p",[t._v(t._s(a.name))])])}),0)]):t._e(),t._v(" "),t._m(0),t._v(" "),e("transition",{attrs:{name:"fadeInUp"}},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.closeBtn,expression:"closeBtn"}],staticClass:"close-btn",on:{click:t.back}},[t._v("关闭")])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("footer",[a("span",[this._v("已经到底了哟")])])}]};var R=e("C7Lr")(T,N,!1,function(t){e("m2TQ")},"data-v-429003ac",null).exports,j={name:"Ranking",data:function(){return{top250List:[],movieList_l:[],movieList_r:[],switchData:!0,startValue:0,countValue:10,totalValue:1,openFlag:!1,cardStyle:{w:"",h:"",top:"",left:"",imgSrc:"",id:""},loading:!0}},created:function(){this.getTop250()},watch:{startValue:function(t){t>=this.totalValue&&(this.loading=!1)}},mounted:function(){var t=this;this.switchData=!1,window.addEventListener("scroll",function(){document.body.offsetHeight-window.scrollY-window.innerHeight<=200&&t.switchData&&(t.switchData=!1,t.getTop250(),console.log("到底了"))})},methods:{getTop250:function(){var t=this;if(this.top250List.length<this.totalValue){console.log("没有数据，开始获取");this.$ajax.get("https://bird.ioliu.cn/v1/?url=https://api.douban.com/v2/movie/top250?start="+this.startValue+"&count="+this.countValue).then(function(a){console.log(a);var e=a.data;if(t.totalValue=e.total,t.startValue>=t.totalValue)return t.switchData=!1,!1;for(var s=0;s<t.countValue;s++)t.top250List.push(e.subjects[s]);t.startValue+=t.countValue,t.startDistMovie(),t.switchData=!0}).catch(function(a){t.$toast("获取数据失败，请稍候再试。")})}else console.log("有数据，进行分配"),this.startDistMovie(),this.switchData=!0},getTopMock:function(){var t=this;this.top250List.length<this.totalValue?(console.log("没有数据，开始获取"),this.$ajax.get("/top").then(function(a){var e=a.data.data;if(t.totalValue=e.total,t.startValue>=t.totalValue)return t.switchData=!1,!1;console.log("可以继续获取");for(var s=t.startValue;s<t.countValue;s++)t.top250List.push(e.subjects[s]);t.startValue=t.countValue,t.countValue+=10,t.startDistMovie(),t.switchData=!0})):(console.log("有数据，进行分配"),this.startDistMovie(),this.switchData=!0)},startDistMovie:function(){this.$store.commit("distMovie",{listArr:this.top250List,leftList:this.movieList_l,rightList:this.movieList_r})}},components:{SortCard:_}},E={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"content"},[e("van-row",{attrs:{type:"flex",justify:"space-between"}},[e("van-col",{staticClass:"content",attrs:{span:"11"}},[e("div",{ref:"leftSection",staticClass:"leftSection"},[e("SortCard",{attrs:{type:"top-250",name:"Top 250"}}),t._v(" "),e("transition-group",{attrs:{name:"fadeInUp"}},t._l(t.movieList_l,function(a){return e("div",{key:a.id},[e("router-link",{attrs:{to:"/movieInfo/"+a.id}},[e("div",{staticClass:"movie-card"},[e("div",{staticClass:"movie-cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.images.small,expression:"topData.images.small"}],attrs:{src:a.images.small,alt:a.title}})]),t._v(" "),e("h6",{staticClass:"title"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t._f("fullScore")(a.rating.average)))])])])],1)}),0)],1)]),t._v(" "),e("van-col",{staticClass:"content",attrs:{span:"11"}},[e("div",{ref:"rightSection",staticClass:"rightSection"},[e("transition-group",{attrs:{name:"fadeInUp"}},t._l(t.movieList_r,function(a){return e("div",{key:a.id},[e("router-link",{attrs:{to:"/movieInfo/"+a.id}},[e("div",{staticClass:"movie-card"},[e("div",{staticClass:"movie-cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.images.small,expression:"topData.images.small"}],attrs:{src:a.images.small,alt:a.title}})]),t._v(" "),e("h6",{staticClass:"title"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t._f("fullScore")(a.rating.average)))])])])],1)}),0)],1)])],1),t._v(" "),e("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),e("footer",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[e("span",[t._v("已经到底了哟")])])],1)])},staticRenderFns:[]};var A=e("C7Lr")(j,E,!1,function(t){e("Kbv7")},"data-v-2d66b5a6",null).exports,U={name:"Search",data:function(){return{tipShow:!0,suggestList:[],searchData:[],totalValue:1,startValue:0,countValue:10,value:4.5,starSort:[],switchData:!0,loading:!0,findSort:{name:"",switch:!1}}},created:function(){this.randomSuggest(),this.$route.params.name&&this.findSortName(),console.log("已取值："+this.$route.params.name)},mounted:function(){var t=this;this.$refs.searchBox.getElementsByTagName("input")[0].value=this.$store.state.searchValue,this.switchData=!1,window.addEventListener("scroll",function(){document.body.offsetHeight-window.scrollY-window.innerHeight<=200&&t.switchData&&(t.switchData=!1,t.onSearch(),console.log("到底了"))})},watch:{startValue:function(t){t>=this.totalValue&&(this.loading=!1)},$route:{handler:function(t){"Search"===t.name&&this.$route.params.name&&this.findSortName()}}},methods:{onReset:function(){this.tipShow=!0,this.searchData=[],this.totalValue=1,this.startValue=0,this.starSort=[]},onSearch:function(){var t=this;this.$store.commit("saveSearchVal"),this.tipShow=!1;this.$store.state.movieSort.includes(this.$store.state.searchValue)?URL="https://api.douban.com/v2/movie/search?tag=":URL="https://api.douban.com/v2/movie/search?q=",/^[0-9a-zA-Z_.-[\u4e00-\u9fa5]/.test(this.$store.state.searchValue)?this.$ajax.get("https://bird.ioliu.cn/v1/?url="+URL+this.$store.state.searchValue+"&start="+this.startValue+"&count="+this.countValue).then(function(a){if(t.totalValue=a.data.total,t.startValue>=t.totalValue)return t.switchData=!1,!1;for(var e=0;e<t.countValue;e++)t.searchData.push(a.data.subjects[e]),t.starSort.push(a.data.subjects[e].rating.average/2);t.startValue+=t.countValue,t.switchData=!0}).catch(function(a){t.$toast("获取数据失败，请稍候再试。")}):this.$toast("换个搜索词试试吧~")},onCancel:function(){this.$store.commit("cancelSearch"),this.onReset(),this.findSort.name="",console.log(this.findSort),this.$router.go(-1)},searchItem:function(t){var a=t.toElement.innerText;this.$store.commit("searchItem",a),this.onSearch()},focus:function(){this.tipShow=!0},randomSuggest:function(){for(var t=0;t<5;t++){var a=Math.round(Math.random()*this.$store.state.movieSort.length-1),e=this.$store.state.movieSort.splice(a,1);this.suggestList.push(e.join(","))}},findSortName:function(){this.findSort.name=this.$route.params.name,this.findSort.switch=!0,this.$store.commit("searchItem",this.findSort.name),this.onSearch(),this.findSort.name=""}}},z={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"search-page"},[e("div",{staticClass:"search-bar"},[e("form",{attrs:{action:"/"}},[e("van-search",{ref:"searchBox",attrs:{placeholder:"请输入搜索关键词","show-action":""},on:{search:t.onSearch,cancel:t.onCancel,focus:t.focus,input:t.onReset},model:{value:t.$store.state.searchValue,callback:function(a){t.$set(t.$store.state,"searchValue",a)},expression:"$store.state.searchValue"}})],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tipShow,expression:"tipShow"}],staticClass:"search-tip container"},[e("div",{staticClass:"suggest suggest-search"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.$store.state.historySearch.length,expression:"$store.state.historySearch.length != 0"}],staticClass:"history"},[e("h6",{staticClass:"search-label"},[t._v("最近搜索：")]),t._v(" "),e("div",{staticClass:"suggest-item"},t._l(t.$store.state.historySearch,function(a,s){return e("span",{key:s,on:{click:function(a){return t.searchItem(a)}}},[t._v(t._s(a))])}),0)]),t._v(" "),e("h6",{staticClass:"search-label"},[t._v("推荐搜索：")]),t._v(" "),e("div",{staticClass:"suggest-item"},t._l(t.suggestList,function(a,s){return e("span",{key:s,on:{click:function(a){return t.searchItem(a)}}},[t._v(t._s(a))])}),0)])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tipShow,expression:"!tipShow"}],staticClass:"search-content container"},[e("h6",{staticClass:"search-label"},[t._v("以下是"),e("span",{staticClass:"keyword"},[t._v(t._s(t.$store.state.searchValue))]),t._v("的搜索结果")]),t._v(" "),t._l(t.searchData,function(a,s){return e("div",{key:s,staticClass:"search-movie-card"},[e("router-link",{attrs:{to:"/movieInfo/"+a.id}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.images.small,expression:"movie.images.small"}],staticClass:"movie-card-cover",attrs:{src:a.images.small,alt:a.title}}),t._v(" "),e("div",{staticClass:"movie-text-info"},[e("h6",{staticClass:"movie-title"},[t._v(t._s(a.title))]),t._v(" "),e("p",{staticClass:"movie-dir"},[t._v("导演："),t._l(a.directors,function(a,s){return e("span",{key:s},[t._v(t._s(a.name))])})],2),t._v(" "),e("p",{staticClass:"movie-casts"},[t._v("主演："),t._l(a.casts,function(a,s){return e("span",{key:s},[t._v(t._s(a.name))])})],2),t._v(" "),e("div",{staticClass:"movie-genres"},t._l(a.genres,function(a,s){return e("span",{key:s},[t._v(t._s(a))])}),0),t._v(" "),e("div",{staticClass:"star"},[e("van-rate",{attrs:{color:"#ffd21e","allow-half":"","void-icon":"star"},model:{value:t.starSort[s],callback:function(a){t.$set(t.starSort,s,a)},expression:"starSort[i]"}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t._f("fullScore")(a.rating.average)))])],1)])])],1)}),t._v(" "),e("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),e("footer",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[e("span",[t._v("已经到底了哟")])])],2)])},staticRenderFns:[]};var B=e("C7Lr")(U,z,!1,function(t){e("pT5N")},"data-v-2766d1a5",null).exports;h.a.use(k.a);var F=new k.a({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:b,meta:{navShow:!0,keepAlive:!0}},{path:"/find",name:"Find",component:D,meta:{navShow:!0,keepAlive:!0}},{path:"/ranking",name:"Ranking",component:A,meta:{navShow:!0,keepAlive:!0}},{path:"/movieInfo/:id",name:"MovieInfo",component:R,meta:{navShow:!1,keepAlive:!1}},{path:"/search",name:"Search",component:B,meta:{navShow:!1,keepAlive:!0}}],linkActiveClass:"tabActive"}),H=e("R4Sj"),K={title:"state",city:"",homeURL:"https://api.douban.com/v2/movie/in_theaters?city=北京&start=",maskStatus:!1,homeSortCard:{type:"hot",name:"正在热映"},searchValue:"",historySearch:JSON.parse(localStorage.getItem("historySearch")||"[]"),movieSort:["喜剧","动作","爱情","科幻","动画","纪录片","悬疑","犯罪","奇幻","歌舞","同性"]},G=e("3cXf"),J=e.n(G),P={saveSearchVal:function(t){(0==t.historySearch.length||!t.historySearch.includes(t.searchValue)&&/^[0-9a-zA-Z_.-[\u4e00-\u9fa5]/.test(t.searchValue))&&(t.historySearch.unshift(t.searchValue),localStorage.setItem("historySearch",J()(t.historySearch)))},searchItem:function(t,a){t.searchValue=a},cancelSearch:function(t){t.searchValue=""},showMask:function(t){t.maskStatus=!t.maskStatus},switchCard:function(t,a){t.homeSortCard.type=a.type,t.homeSortCard.name=a.name},switchURL:function(t,a){"hot"==a.type?(console.log("发起真实请求"),t.homeURL="https://api.douban.com/v2/movie/in_theaters?city=南昌&start="):"showing-soon"==a.type&&(console.log("发起真实请求"),t.homeURL="https://api.douban.com/v2/movie/coming_soon?city=南昌&start=")},getTop:function(t,a){for(var e=0;a;)e+=a.offsetTop,a=a.offsetParent;return e},distMovie:function(t,a){console.log("开始分配数据");for(var e=a.leftList.length+a.rightList.length,s=a.listArr.length,i=e;i<s;i++)i%2==0?a.rightList.push(a.listArr[i]):a.leftList.push(a.listArr[i])}},Y=e("WMeU"),O=e.n(Y),X=e("/8vw"),q=e.n(X);h.a.use(H.a);var W=new H.a.Store({state:K,mutations:P,getters:O.a,actions:q.a});e("/JRm"),e("8sJK"),e("Kg7K");h.a.use(s.a).use(i.a).use(o.a).use(n.a).use(r.a).use(c.a).use(l.a).use(u.a).use(v.a),h.a.prototype.$ajax=y.a,y.a.defaults.baseURL="/api",y.a.defaults.headers.post["Content-Type"]="application/json",h.a.config.productionTip=!1,new h.a({el:"#app",router:F,components:{App:C},template:"<App/>",store:W}),h.a.filter("fullScore",function(t){var a=t.toString();return 1==a.length?a+".0":a})},Pi1E:function(t,a){},Rjgl:function(t,a){},TyYA:function(t,a){},WMeU:function(t,a){},adJq:function(t,a){},brgl:function(t,a){},m2TQ:function(t,a){},oB5S:function(t,a){},pT5N:function(t,a){},sCmh:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.0056cd7f219d9b95ab7d.js.map